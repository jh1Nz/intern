<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  xmlns:p="http://primefaces.org/ui"
>
  <style>
    body .ui-datatable thead th {
      background-color: #2196f3;
      color: white;
    }
  </style>

  <div class="ui-fluid">
 	 <p:panelGrid
      columns="3"
      columnClasses="
						ui-grid-col-1,
					    ui-grid-col-10,
						ui-grid-col-1"
      layout="grid"
      styleClass="ui-panelgrid-blank"
    >
    <p:outputLabel/>
    <p:dataTable
      id="data-table"
      value="#{xsp01001Bean.xspAssignTaskList}"
      rowIndexVar="index"
      var="data"
      rows="10"
      widgetVar="lazy"
      lazy="true"
      paginator="true"
      rowsPerPageTemplate="5,10,15 ,20, 25,30"
      paginatorPosition="bottom"
      paginatorTemplate="			   {RowsPerPageDropdown} 
			                           {FirstPageLink} 
			                           {PreviousPageLink} 
			                           {PageLinks} 
			                           {CurrentPageReport} 
			                           {NextPageLink} 
			                           {LastPageLink}"
      reflow="true"
      style="text-align: center"
      emptyMessage="ไม่พบข้อมูล"
      selectionMode="single"
      selection="#{xsp01001Bean.formSelected}"
      rowKey="#{data.id}"
    >
      <p:ajax
        event="rowSelect"
        process="@this"
        update=":formc"
        onstart="PF('bui').show()"
        onsuccess="PF('bui').hide()"
        listener="#{xsp01001Bean.onRowSelect}"
        resetValues="true"
      />
      <!-- Col 1 -->
      <p:column
        headerText="ลบ"
        width="2%;"
        style="text-align: center"
        sortBy=""
      >
        <h:outputText
          style="float: center !important; text-align: left !important"
          value="#{index+1}"
        >
        </h:outputText>
      </p:column>

      <p:column
        headerText="ชื่อเอกสาร"
        width="15%;"
        style="text-align: center"
        sortBy=""
      >
        <h:outputText
          style="float: center !important; text-align: left !important"
          value="#{data.xspPersonActorRequest.personNickname}"
        >
        </h:outputText>
      </p:column>

      <p:column
        headerText="ชื่อไฟล์"
        width="10%;"
        style="text-align: center"
        sortBy=""
      >
        <h:outputText
          style="float: center !important; text-align: left !important"
          rendered="#{data.actorRole eq 'D'}"
          value="Dev"
        >
        </h:outputText>
        <h:outputText
          style="float: center !important; text-align: left !important"
          rendered="#{data.actorRole eq 'Q'}"
          value="QC"
        >
        </h:outputText>
        <h:outputText
          style="float: center !important; text-align: left !important"
          rendered="#{data.actorRole eq 'A'}"
          value="Design"
        >
        </h:outputText>
      </p:column>

      <p:column
        headerText="ขนาดไฟล์"
        width="5%;"
        style="text-align: center"
        sortBy=""
      >
        <h:outputText
          style="float: center !important; text-align: left !important"
          value="#{data.screenId}"
        >
        </h:outputText>
      </p:column>

      <p:column
        headerText="ดาวน์โหลด"
        width="5%;"
        style="text-align: center"
        sortBy=""
      >
        <h:outputText
          style="float: left !important; text-align: left !important"
          value="#{data.xspScreenNameRequest.screenName}"
        >
        </h:outputText>
      </p:column>

      <p:column
        headerText="เปิด"
        width="5%;"
        style="text-align: center"
        sortBy=""
      >
        <h:outputText
          style="float: center !important; text-align: left !important"
          value="#{data.taskDescription}"
        >
        </h:outputText>
      </p:column>
      
    </p:dataTable>
    <p:outputLabel/>
    </p:panelGrid>
    <p:panelGrid
      columns="3"
      columnClasses="
						ui-grid-col-6,
						ui-grid-col-1,
						ui-grid-col-6"
      layout="grid"
      styleClass="ui-panelgrid-blank"
    >
    <p:outputLabel/>
    <p:commandButton 
	                icon="fa fa-plus white" 
	                value="เพิ่ม" 
	                actionListener="#{xsp01001Bean.onPageInsert}"
	                update=":formc"
	                immediate="true">  
	             	<p:resetInput 
	             		target =":formc" />
	</p:commandButton>
    <p:outputLabel/>
    
    </p:panelGrid>
    </div>

</ui:composition>
